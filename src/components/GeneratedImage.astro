---
/**
 * Generated image placeholder for GitHub projects
 * Displays a gradient background with project title overlay
 */

import {
  getLanguageGradient,
  getFontForRepo,
  displayFonts,
} from '../lib/github/image-generator';

interface Props {
  title: string;
  language?: string | null;
  repoName?: string;
}

const { title, language = null, repoName = title } = Astro.props;

const colors = getLanguageGradient(language);
const fontFamily = getFontForRepo(repoName);
---

<div
  class="generated-image-wrapper"
  style={`--gradient-start: ${colors.start}; --gradient-end: ${colors.end}; --display-font: '${fontFamily}', system-ui, sans-serif;`}
>
  <div class="glow-layer"></div>
  <div class="generated-image">
    <div class="dark-overlay"></div>
    <span class="generated-title">{title}</span>
  </div>
</div>

<style>
  .generated-image-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
  }

  /* Glow layer - blurred copy of gradient behind main image */
  .glow-layer {
    position: absolute;
    inset: -20px;
    background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
    filter: blur(40px);
    opacity: 0.5;
    z-index: 0;
    transition: opacity 0.3s ease, filter 0.3s ease;
  }

  /* Muted glow in dark mode */
  :global([data-theme="dark"]) .glow-layer {
    opacity: 0.3;
  }

  /* Intensify glow on hover */
  :global(.project-card:hover) .glow-layer {
    opacity: 0.7;
    filter: blur(50px);
  }

  :global([data-theme="dark"] .project-card:hover) .glow-layer {
    opacity: 0.45;
  }

  .generated-image {
    position: relative;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    z-index: 1;
  }

  .generated-image::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(
      circle at 30% 30%,
      rgba(255, 255, 255, 0.15) 0%,
      transparent 50%
    );
  }

  .generated-image::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(
      circle at 70% 70%,
      rgba(0, 0, 0, 0.1) 0%,
      transparent 50%
    );
  }

  .generated-title {
    position: relative;
    z-index: 2;
    font-family: var(--display-font);
    font-size: clamp(1.5rem, 5vw, 2.5rem);
    font-weight: 600;
    color: white;
    text-align: center;
    text-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    padding: var(--space-4);
    max-width: 90%;
    line-height: 1.2;
  }

  /* Dark theme overlay to mute vibrant gradients */
  .dark-overlay {
    position: absolute;
    inset: 0;
    background: rgba(13, 17, 23, 0.4);
    z-index: 1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  :global([data-theme="dark"]) .dark-overlay {
    opacity: 1;
  }
</style>
