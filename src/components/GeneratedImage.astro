---
/**
 * Generated image placeholder for GitHub projects
 * Displays a dark background with glowing language-colored blob
 */

import {
  getStackGradient,
  getStackColors,
  getFontForRepo,
} from '../lib/github/image-generator';

interface Props {
  title: string;
  language?: string | null;
  repoName?: string;
  tags?: string[];
}

const { title, language = null, repoName = title, tags = [] } = Astro.props;

const stackGradient = getStackGradient(tags, language);
const stackColors = getStackColors(tags, language);
const primaryColor = stackColors[0] || '#6e7681';
const fontFamily = getFontForRepo(repoName);
---

<div
  class="generated-image-wrapper"
  style={`--stack-gradient: ${stackGradient}; --primary-color: ${primaryColor}; --display-font: '${fontFamily}', system-ui, sans-serif;`}
>
  <div class="generated-image">
    <div class="glow-blob"></div>
    <span class="generated-title">{title}</span>
  </div>
</div>

<style>
  .generated-image-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .generated-image {
    position: relative;
    width: 100%;
    height: 100%;
    background: #0d1117;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  /* Light mode: slightly lighter dark background */
  :global(:not([data-theme="dark"])) .generated-image {
    background: #1a1f26;
  }

  /* Centered glowing blob with multi-color gradient */
  .glow-blob {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 120%;
    height: 120%;
    background: var(--stack-gradient);
    border-radius: 50%;
    filter: blur(40px);
    opacity: 0.7;
    transition: opacity 0.3s ease, filter 0.3s ease, transform 0.3s ease;
  }

  /* Light mode: more visible glow */
  :global(:not([data-theme="dark"])) .glow-blob {
    opacity: 0.8;
  }

  /* Intensify glow on hover */
  :global(.project-card:hover) .glow-blob {
    opacity: 0.9;
    filter: blur(35px);
    transform: translate(-50%, -50%) scale(1.05);
  }

  :global([data-theme="dark"] .project-card:hover) .glow-blob {
    opacity: 0.8;
  }

  .generated-title {
    position: relative;
    z-index: 2;
    font-family: var(--display-font);
    font-size: clamp(1.5rem, 5vw, 2.5rem);
    font-weight: 600;
    color: white;
    text-align: center;
    text-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    padding: var(--space-4);
    max-width: 90%;
    line-height: 1.2;
  }
</style>
